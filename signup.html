<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign Up - Kitsune</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

  <style>
    body {font-family: Inter, sans-serif; background: linear-gradient(180deg,#071023 0%,#081126 60%);
      display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; color: #e6eef8;}
    .card {background:#0b1220;padding:32px 24px;border-radius:14px;max-width:400px;width:100%;
      box-shadow:0 10px 30px rgba(2,6,23,0.7);}
    h2 {margin-top:0;margin-bottom:16px;}
    label {display:block;margin-bottom:6px;font-weight:600;}
    input {width:100%;padding:10px 12px;margin-bottom:14px;border-radius:8px;
      border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.03);color:#fff;}
    input:focus {border-color:#ff6b81;outline:none;}
    .btn {width:100%;padding:12px;border:none;border-radius:8px;background:linear-gradient(90deg,#ff6b81,#7c5cff);
      color:#071023;font-weight:700;cursor:pointer;}
    .divider {text-align:center;margin:20px 0;color:#98a0b3;position:relative;}
    .divider::before,.divider::after{content:'';position:absolute;top:50%;width:40%;height:1px;
      background:rgba(255,255,255,0.1);} .divider::before{left:0;} .divider::after{right:0;}
    .footer{text-align:center;margin-top:16px;font-size:13px;color:#98a0b3;}
    .google-signin-wrapper{display:flex;justify-content:center;margin:20px 0;}
  </style>

  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
  <div class="card">
    <h2>Create Account - Kitsune</h2>

    <label>Full Name</label>
    <input type="text" id="name" placeholder="Enter your full name">

    <label>Email</label>
    <input type="email" id="email" placeholder="Enter your email">

    <label>Phone Number</label>
    <input type="text" id="phone" placeholder="Enter your phone number">

    <label>Username</label>
    <input type="text" id="username" placeholder="Choose a username">

    <label>Password</label>
    <input type="password" id="password" placeholder="Create password">

    <label>Confirm Password</label>
    <input type="password" id="confirm" placeholder="Confirm password">

    <button class="btn" id="signupBtn">Sign Up</button>

    <div class="divider">or</div>

    <!-- Google Sign-Up (unchanged) -->
    <div class="google-signin-wrapper">
      <div id="g_id_onload"
        data-client_id="313330582001-705egcef1ef656lmqb5i7qmkb4n5t6at.apps.googleusercontent.com"
        data-context="signup"
        data-ux_mode="popup"
        data-callback="handleCredentialResponse"
        data-auto_prompt="false">
      </div>
      <div class="g_id_signin" data-type="standard" data-theme="outline" data-text="signup_with"></div>
    </div>

    <div class="footer">
      Already have an account?
      <a href="signin.html" style="color:#ff6b81;text-decoration:none;font-weight:600;">Sign In</a>
    </div>
  </div>

  <script>
    // Manual Signup
    document.getElementById('signupBtn').addEventListener('click', () => {
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim().toLowerCase();
      const phone = document.getElementById('phone').value.trim();
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value;
      const confirm = document.getElementById('confirm').value;

      if (!name || !email || !phone || !username || !password || !confirm) {
        alert("Please fill all fields."); return;
      }
      if (password !== confirm) {
        alert("Passwords do not match."); return;
      }

      // Load existing users
      const users = JSON.parse(localStorage.getItem("kitsune_users") || "[]");
      const duplicate = users.find(u => u.email === email || u.phone === phone);
      if (duplicate) {
        alert("An account with this email or phone already exists."); return;
      }

      const newUser = { name, email, phone, username: '@' + username, password, avatar: null, provider: 'local' };
      users.push(newUser);
      localStorage.setItem("kitsune_users", JSON.stringify(users));
      localStorage.setItem("kitsune_user", JSON.stringify(newUser));

      alert("Account created successfully!");
      window.location.href = "home.html";
    });

    // Google callback (unchanged)
    function handleCredentialResponse(response) {
      const data = JSON.parse(atob(response.credential.split('.')[1]));
      const user = {
        name: data.name,
        email: data.email,
        phone: null,
        username: '@' + data.given_name.toLowerCase(),
        avatar: data.picture,
        provider: 'google'
      };
      localStorage.setItem('kitsune_user', JSON.stringify(user));
      window.location.href = 'home.html';
    }
  </script>
</body>
</html>