<!doctype html>
<html lang="en">
<head>
    <script>
  // Step 2: Auth Guard
  (function() {
    const user = localStorage.getItem('kitsune_user');
    if (!user) {
      // Not logged in → redirect to signin page
      window.location.href = 'signin.html';
    }
  })();
</script>
<script>
  // Prevent two-finger swipe navigation on trackpads / touch devices
  window.addEventListener('wheel', (e) => {
    if (e.deltaX !== 0 && e.ctrlKey === false) {
      e.preventDefault();
    }
  }, { passive: false });
</script>
<script>
  let startX = 0;
  window.addEventListener('touchstart', e => {
    startX = e.touches[0].clientX;
  });
  window.addEventListener('touchmove', e => {
    const diffX = e.touches[0].clientX - startX;
    if (Math.abs(diffX) > 80) e.preventDefault(); // prevent swipe nav gesture
  }, { passive: false });
</script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kitsune — Home</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --muted:#98a0b3;
      --accent1:#ff6b81;
      --accent2:#7c5cff;
      --glass: rgba(255,255,255,0.04);
      --radius:14px;
      --max-width:1200px;
    }

    /* Reset */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(180deg,#071023 0%, #081126 60%);
      color:#e6eef8;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.4;
      overflow-x:hidden;
    }

    .wrap{max-width:var(--max-width);margin:0 auto;padding:18px}

    /* Header */
    header{
      display:flex;align-items:center;gap:18px;
      justify-content:space-between;
      padding:14px 0;
    }
    .brand{
      display:flex;align-items:center;gap:12px;
    }
    .logo-img{
      width:52px;height:52px;border-radius:10px;overflow:hidden;
      background:linear-gradient(90deg,var(--accent1),var(--accent2));
      display:flex;align-items:center;justify-content:center;
      box-shadow:0 8px 20px rgba(124,92,255,0.12);
      flex-shrink:0;
    }
    .logo-img img{width:100%;height:100%;object-fit:cover;display:block}
    .brand-title{font-weight:800;font-size:18px}
    .brand-sub{font-size:12px;color:var(--muted);font-weight:600}

    /* nav */
    nav{display:flex;gap:12px;align-items:center}
    .search {
      display:flex;align-items:center;gap:10px;background:var(--glass);
      padding:8px 12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);
      min-width:220px;
    }
    .search input{
      background:transparent;border:0;outline:0;color:inherit;font-size:14px;
    }
    .icons{display:flex;gap:12px;align-items:center}
    .icon-btn{
      width:40px;height:40px;border-radius:10px;background:var(--glass);display:grid;place-items:center;border:1px solid rgba(255,255,255,0.03);
    }

    .hamburger{
      display:flex;flex-direction:column;gap:4px;padding:8px;border-radius:8px;
      background:var(--glass);cursor:pointer;border:1px solid rgba(255,255,255,0.03);
    }
    .hamburger span{width:18px;height:2px;background:#e6eef8;display:block;border-radius:2px}

    /* Hero */
    .hero{
      margin-top:18px;border-radius:16px;overflow:hidden;position:relative;
      background:
        linear-gradient(180deg, rgba(11,18,32,0.5), rgba(11,18,32,0.5)),
        url('assets/images/hero.jpg') center/cover no-repeat;
      min-height:360px;display:flex;align-items:center;
    }
    .hero-inner{
      width:100%;display:flex;justify-content:space-between;align-items:center;padding:36px;
    }
    .hero-left{max-width:680px}
    .kicker{display:inline-block;background:rgba(255,255,255,0.04);padding:8px 12px;border-radius:999px;color:var(--accent1);font-weight:800;margin-bottom:12px}
    .hero h1 {
  font-size: 36px;
  line-height: 1.05;
  margin-bottom: 12px;
  background: linear-gradient(90deg, var(--accent1), var(--accent2));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  -webkit-text-fill-color: transparent;
}
    .hero p{color:var(--muted);margin-bottom:18px}
    .hero-ctas{display:flex;gap:12px;align-items:center}
    .btn-primary{padding:10px 16px;border-radius:12px;border:none;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#071023;font-weight:800;cursor:pointer}
    .btn-ghost{padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--muted);cursor:pointer}

    /* Featured grid */
    section.cards{margin-top:22px}
    .section-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    .section-head h2{font-size:18px}
    .cards-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.03)}
    .thumb{height:200px;background-size:cover;background-position:center}
    .card-body{padding:12px}
    .card-title{font-weight:700;margin-bottom:6px;font-size:15px}
    .card-meta{display:flex;justify-content:space-between;align-items:center;color:var(--muted);font-size:13px}
    .pill{background:rgba(255,255,255,0.03);padding:6px 8px;border-radius:999px;font-size:12px}

    /* rating stars */
    .rating{display:flex;gap:6px;align-items:center}
    .stars{color:#ffb86b;font-weight:800}

    /* side drawer */
    .drawer{
      position:fixed;top:0;right:-320px;width:320px;height:100%;background:#071023;padding:18px;
      box-shadow:-20px 0 40px rgba(2,6,23,0.6);transition:right 0.36s cubic-bezier(.2,.9,.2,1);z-index:1200;
    }
    .drawer.open{right:0}
    .drawer h3{margin-bottom:12px}
    .drawer .option{padding:12px;border-radius:10px;background:var(--card);margin-bottom:8px;display:flex;justify-content:space-between;align-items:center}
    .drawer .switch{display:flex;gap:8px}

    /* footer */
    footer{margin-top:30px;padding:20px 0;text-align:center;color:var(--muted)}

    /* Logo glow + menu animation (option 4) */
    .brand-title, nav ul {opacity:0;transform:translateY(-10px)}
    nav ul{display:flex;gap:18px;list-style:none}
    @keyframes logoGlow {
      0%{opacity:0;transform:scale(.96);text-shadow:none}
      50%{opacity:1;transform:scale(1.04);text-shadow:0 0 12px var(--accent1), 0 0 24px var(--accent2)}
      100%{opacity:1;transform:scale(1);text-shadow:0 0 8px var(--accent1)}
    }
    @keyframes menuSlide{from{opacity:0;transform:translateY(-18px)}to{opacity:1;transform:translateY(0)}}
    body.loaded .brand-title{animation:logoGlow 1.1s ease forwards}
    body.loaded nav ul li{animation:menuSlide .45s ease forwards}
    nav ul li:nth-child(1){animation-delay:1s}
    nav ul li:nth-child(2){animation-delay:1.15s}
    nav ul li:nth-child(3){animation-delay:1.3s}
    nav ul li:nth-child(4){animation-delay:1.45s}
    nav ul li:nth-child(5){animation-delay:1.6s}

    /* 📱 Responsive improvements */
@media (max-width:1000px) {
  .cards-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (max-width:760px) {
  header {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }

  .hero {
    flex-direction: column;
    min-height: 280px;
    text-align: center;
    background-position: top center;
  }

  .hero-inner {
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }

  .hero-left {
    max-width: 100%;
  }

  .hero h1 {
    font-size: 26px;
  }

  .hero p {
    font-size: 14px;
  }

  .hero-ctas {
    flex-direction: column;
    gap: 10px;
  }

  .cards-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 14px;
  }

  .search {
    min-width: 160px;
    width: 100%;
  }
}

@media (max-width:480px) {
  .wrap {
    padding: 10px;
  }

  .hero {
    min-height: 220px;
    padding: 10px;
  }

  .hero-inner {
    padding: 10px;
  }

  .hero h1 {
    font-size: 22px;
    line-height: 1.2;
  }

  .hero p {
    font-size: 13px;
  }

  .cards-grid {
    grid-template-columns: 1fr;
    gap: 12px;
  }
  /* For tablets */
@media (max-width: 1000px) {
  .cards-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* For smaller phones */
@media (max-width: 760px) {
  .cards-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* For very small phones (optional) */
@media (max-width: 480px) {
  .cards-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
  }

  .card .thumb {
    height: 120px; /* smaller thumbnails */
  }

  .card-title {
    font-size: 12px;
  }

  .card-meta {
    font-size: 11px;
  }
}

  .card {
    width: 100%;
  }

  footer {
    font-size: 12px;
    padding: 12px 0;
  }

  nav ul {
    display: none; /* Hide desktop nav menu on mobile */
  }
}
/* 💡 Align hamburger menu to top-right on mobile */
@media (max-width: 760px) {
  header {
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
  }

  .brand {
    flex: 1;
  }

  /* Move hamburger to top-right corner */
  .icons {
    order: 3;
    position: absolute;
    top: 20px;
    right: 18px;
    display: flex;
    gap: 8px;
  }

  .hamburger {
    background: var(--glass);
    padding: 8px;
    border-radius: 10px;
  }

  /* Center search bar below brand */
  .search {
    width: 100%;
    margin-top: 10px;
  }
}

    /* subtle hover */
    .card:hover{transform:translateY(-6px);transition:transform .22s ease;box-shadow:0 12px 34px rgba(2,6,23,0.6)}
    .btn-primary:hover{transform:translateY(-4px);transition:transform .18s ease}
    /* 📱 Centered search bar with violet margin glow */
@media (max-width: 760px) {
  .search {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 90%;
    margin: 12px auto;
    padding: 12px 16px;
    border-radius: 14px;

    /* Violet outline + glowing edge */
    border: 2px solid var(--accent2);
    box-shadow:
      0 0 8px rgba(124, 92, 255, 0.5),
      0 0 16px rgba(124, 92, 255, 0.2);

    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(8px);
    transition: all 0.3s ease;
  }

  /* When user taps or focuses input */
  .search:focus-within {
    box-shadow:
      0 0 12px var(--accent2),
      0 0 28px var(--accent1);
    transform: scale(1.02);
  }

  .search input {
    flex: 1;
    background: transparent;
    border: none;
    outline: none;
    color: #fff;
    font-size: 16px;
    text-align: center;
    font-weight: 500;
  }

  .search input::placeholder {
    color: #d2cfff;
    opacity: 1;
  }

  .search svg {
    opacity: 0.9;
    margin-left: 8px;
  }
}
/* ✨ Universal glowing search bar — desktop + mobile */
.search {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 300px;
  padding: 10px 16px;
  border-radius: 14px;

  /* Violet border + gradient glow */
  border: 2px solid var(--accent2);
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(8px);
  box-shadow:
    0 0 8px rgba(124, 92, 255, 0.4),
    0 0 16px rgba(255, 107, 129, 0.2);

  transition: all 0.3s ease;
}

/* 🌈 Glow intensifies on focus */
.search:focus-within {
  box-shadow:
    0 0 12px var(--accent2),
    0 0 24px var(--accent1);
  transform: scale(1.02);
  border-color: var(--accent1);
}

/* 📝 Input text style */
.search input {
  flex: 1;
  background: transparent;
  border: none;
  outline: none;
  color: #fff;
  font-size: 15px;
  font-weight: 500;
  text-align: center;
}

/* Placeholder glow */
.search input::placeholder {
  color: #d2cfff;
  text-shadow: 0 0 6px rgba(124, 92, 255, 0.4);
}

/* Magnifying icon */
.search svg {
  opacity: 0.9;
  margin-left: 8px;
}

/* 📱 Center for mobile */
@media (max-width: 760px) {
  .search {
    width: 90%;
    margin: 12px auto;
  }
}
/* ✨ Glowing icons (Search, Community, Profile) */
.icons .icon-btn {
  position: relative;
  transition: all 0.3s ease;
  box-shadow: 0 0 6px rgba(124, 92, 255, 0.2);
  border: 1px solid rgba(124, 92, 255, 0.15);
}

/* Glow when hovered or focused */
.icons .icon-btn:hover,
.icons .icon-btn:focus-within {
  box-shadow:
    0 0 8px rgba(124, 92, 255, 0.6),
    0 0 16px rgba(255, 107, 129, 0.3);
  transform: scale(1.08);
  border-color: var(--accent1);
}

/* Gentle pulse glow animation */
@keyframes softPulse {
  0% {
    box-shadow: 0 0 6px rgba(124, 92, 255, 0.4);
  }
  50% {
    box-shadow:
      0 0 10px rgba(124, 92, 255, 0.6),
      0 0 18px rgba(255, 107, 129, 0.3);
  }
  100% {
    box-shadow: 0 0 6px rgba(124, 92, 255, 0.4);
  }
}

/* Apply subtle continuous glow */
.icons .icon-btn {
  animation: softPulse 2.4s infinite ease-in-out;
}
/* ===== Profile Modal Overlay ===== */
.profile-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(7, 10, 20, 0.7);
  backdrop-filter: blur(10px);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  animation: fadeIn 0.3s ease;
}
/* ===== Profile Modal Overlay (Updated Glow Version) ===== */
.profile-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(7, 10, 20, 0.7);
  backdrop-filter: blur(10px);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  animation: fadeIn 0.3s ease;
}

/* Profile Card Modal */
.profile-modal {
  position: relative;
  background: rgba(15, 20, 35, 0.95);
  border-radius: 16px;
  padding: 36px 26px 26px;
  max-width: 380px;
  width: 90%;
  text-align: center;
  border: 2px solid rgba(255, 255, 255, 0.08);
  box-shadow: 0 0 25px rgba(124, 92, 255, 0.5), 0 0 45px rgba(255, 107, 129, 0.3);
  animation: popupZoom 0.35s ease;
}

/* ✖ Close Button - now inside modal top-right corner */
.close-profile {
  position: absolute;
  top: 10px;
  right: 12px;
  background: none;
  border: none;
  color: var(--muted);
  font-size: 22px;
  cursor: pointer;
  transition: color 0.3s ease, transform 0.2s ease;
}
.close-profile:hover {
  color: var(--accent1);
  transform: scale(1.2);
}

.profile-modal img {
  width: 110px;
  height: 110px;
  border-radius: 50%;
  object-fit: cover;
  margin-bottom: 12px;
  border: 3px solid var(--accent1);
  box-shadow: 0 0 15px var(--accent2);
}

.profile-modal h2 {
  font-size: 20px;
  margin-bottom: 4px;
}

.profile-modal p {
  color: var(--muted);
  margin-bottom: 8px;
  font-size: 14px;
}

/* Logout Button */
.profile-modal .logout-btn {
  margin-top: 16px;
  width: 100%;
  padding: 10px 16px;
  border-radius: 10px;
  border: none;
  background: linear-gradient(90deg, var(--accent1), var(--accent2));
  color: #071023;
  font-weight: 700;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.profile-modal .logout-btn:hover {
  transform: scale(1.03);
  box-shadow: 0 0 15px var(--accent1);
}

/* Animations */
@keyframes popupZoom {
  from { transform: scale(0.85); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}
/* ---------- Camera icon attached to avatar (strong specificity) ---------- */
.profile-modal .avatar-box,
.avatar-box {
  position: relative !important;
  display: inline-block;
}

.profile-modal .avatar-box img,
.avatar-box img {
  display: block;
  width: 110px;
  height: 110px;
  border-radius: 50%;
  object-fit: cover;
}

/* upload button attached to the avatar circle */
.profile-modal .avatar-box .upload-btn,
.avatar-box .upload-btn,
#profileOverlay .avatar-box .upload-btn {
  position: absolute !important;
  bottom: 6px !important;
  right: 6px !important;
  z-index: 40 !important;
  width: 40px !important;
  height: 40px !important;
  border-radius: 50% !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  background: linear-gradient(90deg, var(--accent1), var(--accent2)) !important;
  color: #071023 !important;
  border: none !important;
  font-size: 18px !important;
  cursor: pointer !important;
  box-shadow: 0 0 12px rgba(124,92,255,0.6) !important;
  transition: transform .18s ease, box-shadow .18s ease !important;
  outline: none !important;
}

/* hover */
.profile-modal .avatar-box .upload-btn:hover,
.avatar-box .upload-btn:hover {
  transform: scale(1.08) !important;
  box-shadow: 0 0 20px rgba(255,107,129,0.9) !important;
}

/* ensure button is not hidden by any parent */
.profile-overlay,
.profile-modal {
  z-index: 2000;
}
#profileAvatar {
  box-shadow: 0 0 12px rgba(124, 92, 255, 0.4);
  transition: transform 0.2s ease, box-shadow 0.3s ease;
}
#profileAvatar:hover {
  transform: scale(1.08);
  box-shadow: 0 0 20px rgba(255, 107, 129, 0.8);
}
/* 🌐 Community Modal (Smooth Animated & Matching Profile Style) */
.community-modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  backdrop-filter: blur(8px);
  background: rgba(0, 0, 0, 0.6);
  justify-content: center;
  align-items: center;
  z-index: 2000;
  opacity: 0;
  transition: opacity 0.35s ease;
}

.community-modal.active {
  display: flex;
  opacity: 1;
  animation: fadeInBg 0.35s ease forwards;
}

@keyframes fadeInBg {
  from { opacity: 0; }
  to { opacity: 1; }
}

.community-content {
  background: rgba(11, 18, 32, 0.95);
  border-radius: 16px;
  padding: 28px;
  width: 90%;
  max-width: 480px;
  box-shadow: 0 0 25px rgba(124, 92, 255, 0.6);
  color: #e6eef8;
  text-align: left;
  position: relative;
  line-height: 1.6;
  transform: scale(0.9);
  opacity: 0;
  transition: transform 0.35s ease, opacity 0.35s ease;
}

.community-modal.active .community-content {
  transform: scale(1);
  opacity: 1;
}

.community-content h2 {
  text-align: center;
  margin-bottom: 14px;
  font-weight: 700;
  background: linear-gradient(90deg, #ff6b81, #7c5cff);
  background-clip: text;          
  -webkit-background-clip: text; 
  -webkit-text-fill-color: transparent;
  color: transparent;   
}

.community-content p {
  font-size: 14px;
  margin-bottom: 12px;
}

.close-btn {
  position: absolute;
  top: 10px;
  right: 14px;
  background: transparent;
  border: none;
  font-size: 24px;
  color: #e6eef8;
  cursor: pointer;
  transition: color 0.2s ease, transform 0.2s ease;
}

.close-btn:hover {
  color: #ff6b81;
  transform: scale(1.15);
}
/* 📱 Responsive fix for anime cards on mobile */
@media (max-width: 768px) {
  .anime-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 14px;
    padding: 0 10px;
  }

  .anime-card img {
    width: 100%;
    aspect-ratio: 16 / 9;
    object-fit: cover;
    border-radius: 12px;
  }

  .anime-card {
    background: rgba(15, 23, 42, 0.7);
    border-radius: 16px;
    padding: 8px;
    text-align: center;
    transition: transform 0.3s ease;
  }

  .anime-card:hover {
    transform: scale(1.02);
  }

  .anime-card h3 {
    font-size: 0.9rem;
    margin-top: 6px;
  }

  .anime-card .rating {
    font-size: 0.8rem;
  }
}
/* 🎯 FIXED RESPONSIVE ANIME GRID — perfect 3 per row on mobile */
.cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
  gap: 12px;
  justify-items: center;
  align-items: stretch;
  margin-top: 10px;
}

/* 🧱 Anime Card Design */
.cards-grid .card {
  width: 100%;
  max-width: 150px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  overflow: hidden;
  transition: transform 0.25s ease, box-shadow 0.25s ease;
  text-align: center;
}

.cards-grid .card:hover {
  transform: scale(1.05);
  box-shadow: 0 0 14px rgba(124, 92, 255, 0.4);
}

/* 🖼 Anime Image Ratio */
.cards-grid .thumb {
  width: 100%;
  aspect-ratio: 3 / 4; /* perfect ratio for anime cover */
  object-fit: cover;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 10px 10px 0 0;
}

/* 🧾 Card Text */
.cards-grid .card-body {
  padding: 8px 6px;
}

.cards-grid .card-title {
  font-size: 13px;
  font-weight: 600;
  margin: 4px 0 2px;
  line-height: 1.2;
}

.cards-grid .card-meta {
  font-size: 11px;
  color: var(--muted);
}

/* 🌐 Responsive Layouts */
@media (min-width: 1024px) {
  .cards-grid {
    grid-template-columns: repeat(4, 1fr);
    gap: 18px;
  }
  .cards-grid .card {
    max-width: 220px;
  }
}

@media (max-width: 768px) {
  .cards-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
  }
  .cards-grid .card {
    max-width: none;
  }
  .cards-grid .thumb {
    aspect-ratio: 2.5 / 3.5;
  }
}

@media (max-width: 480px) {
  .cards-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
  }
  .cards-grid .card-title {
    font-size: 11.5px;
  }
  .cards-grid .card-meta {
    font-size: 10px;
  }
}
</style>
</head>
<body>

  <!-- Side drawer (2D / 3D options) -->
  <div class="drawer" id="drawer" aria-hidden="true">
    <h3>Animation Type</h3>
    <div class="option">
      <div>2D Animation</div>
      <div class="switch"><input id="opt2d" type="radio" name="anim" checked> </div>
    </div>
    <div class="option">
      <div>3D Animation</div>
      <div class="switch"><input id="opt3d" type="radio" name="anim"> </div>
    </div>
    <div style="margin-top:16px;color:var(--muted);font-size:13px">Tip: Choose 3D for donghua-heavy sections.</div>
  </div>

  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo-img" id="logoBox">
          <!-- If you have a small logo file, put it at assets/images/logo-small.png -->
          <img src="Image & logo/WhatsApp Image 2025-10-18 at 15.35.48_9c288ee5.jpg" alt="Kitsune" onerror="this.style.display='none'">
        </div>
        <div>
          <div class="brand-title">Kitsune</div>
          <div class="brand-sub">Anime & Donghua</div>
        </div>
      </div>

      <nav>
        <ul>
          <li><a href="#">Home</a></li>
          <li><a href="#">Explore</a></li>
          <li><a href="#">Community</a></li>
          <li><a href="#">Profile</a></li>
          <li><a href="#" id="genreToggle">Genres</a></li>
        </ul>
      </nav>

      <div style="display:flex;align-items:center;gap:12px">
        <div class="search" role="search">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <input id="searchInput" placeholder="Search anime, e.g. 'Shounen'">
        </div>

        <div class="icons">
          <div class="icon-btn" id="exploreBtn" title="Explore">🔍</div>
          <div class="icon-btn" title="Community" id="communityBtn">💬</div>
          <!-- 🧑‍💻 Dynamic user avatar -->
<div class="icon-btn" id="profileBtn" title="Profile">
  <img id="profileAvatar" 
       src="assets/images/default-avatar.png" 
       alt="Profile" 
       style="width: 36px; height: 36px; border-radius: 50%; object-fit: cover;">
</div>
          <div class="hamburger" id="hamburger" aria-label="menu" title="Menu">
            <span></span><span></span><span></span>
          </div>
        </div>
      </div>
    </header>

    <!-- Hero -->
    <section class="hero" role="banner" aria-label="Featured">
      <div class="hero-inner">
        <div class="hero-left">
          <div class="kicker">Featured</div>
          <h1>Welcome to Kitsune — your anime gateway</h1>
          <p>Discover trending anime and donghua. Browse by genre, see community ratings, and start watching instantly.</p>
        </div>

        <!-- optional decorative image -->
        <div style="min-width:240px;max-width:360px;display:flex;justify-content:center">
          <!-- If you want a hero image on the right, put it here (otherwise background does the job) -->
          <img src="assets/images/hero-thumb.png" alt="" style="width:320px;border-radius:12px;box-shadow:0 20px 40px rgba(2,6,23,0.6)" onerror="this.style.display='none'">
        </div>
      </div>
    </section>

    <!-- Featured -->
    <section class="cards" id="featured" aria-label="Trending Now">
      <div class="section-head">
        <h2>Trending Now</h2>
        <div style="color:var(--muted)">Top picks from our community</div>
      </div>

      <div class="cards-grid" id="grid">
        <!-- cards are generated by JS below; placeholders added for no-JS fallback -->
        <article class="card">
          <div class="thumb" style="background-image:url('Image & logo/Naruto_Shippuden.jpg')"></div>
          <div class="card-body">
            <div class="card-title">Naruto Shippuden</div>
            <div class="card-meta"><span class="pill">Action</span><span class="rating"><span class="stars">⭐⭐⭐⭐☆</span> 4.8</span></div>
          </div>
        </article>

        <article class="card">
          <div class="thumb" style="background-image:url('Image & logo/Death_note.jpg')"></div>
          <div class="card-body">
            <div class="card-title">Death Note</div>
            <div class="card-meta"><span class="pill">Thriller</span><span class="rating"><span class="stars">⭐⭐⭐⭐⭐</span> 4.9</span></div>
          </div>
        </article>

        <article class="card">
          <div class="thumb" style="background-image:url('Image & logo/The_time_I_got_reincrination.jpg')"></div>
          <div class="card-body">
            <div class="card-title">That Time I Got Reincarnated as a Slime</div>
            <div class="card-meta"><span class="pill">Isekai</span><span class="rating"><span class="stars">⭐⭐⭐⭐☆</span> 4.6</span></div>
          </div>
        </article>

        <article class="card">
          <div class="thumb" style="background-image:url('Image & logo/btth.png')"></div>
          <div class="card-body">
            <div class="card-title">Battle Through the Heavens</div>
            <div class="card-meta"><span class="pill">Donghua</span><span class="rating"><span class="stars">⭐⭐⭐⭐☆</span> 4.5</span></div>
          </div>
        </article>

        <article class="card">
          <div class="thumb" style="background-image:url('Image & logo/perfect world.avif')"></div>
          <div class="card-body">
            <div class="card-title">Perfect World</div>
            <div class="card-meta"><span class="pill">Donghua</span><span class="rating"><span class="stars">⭐⭐⭐☆☆</span> 3.9</span></div>
          </div>
        </article>

        <article class="card">
          <div class="thumb" style="background-image:url('Image & logo/soul land 2.jpg')"></div>
          <div class="card-body">
            <div class="card-title">Soul Land 2</div>
            <div class="card-meta"><span class="pill">Donghua</span><span class="rating"><span class="stars">⭐⭐⭐⭐☆</span> 4.2</span></div>
          </div>
        </article>

        <article class="card">
          <div class="thumb" style="background-image:url('Image & logo/solo leveling season 2.webp')"></div>
          <div class="card-body">
            <div class="card-title">Solo Leveling — Season 2</div>
            <div class="card-meta"><span class="pill">Action</span><span class="rating"><span class="stars">⭐⭐⭐⭐⭐</span> 4.9</span></div>
          </div>
        </article>

        <a href="donghua/throne-of-seal.html" style="text-decoration:none;color:inherit;">
  <article class="card">
    <div class="thumb" style="background-image:url('Image & logo/throne of seal.jpg')"></div>
    <div class="card-body">
      <div class="card-title">Throne Of Seal</div>
      <div class="card-meta">
        <span class="pill">Donghua</span>
        <span class="rating"><span class="stars">⭐⭐⭐⭐⭐</span> 4.9</span>
      </div>
    </div>
  </article>
</a>

      </div>

      <div style="display:flex;justify-content:center;margin-top:18px">
        <a class="btn-ghost" href="#">Load more</a>
      </div>
    </section>

    <footer>
      © 2025 Kitsune · Built for anime fans · <span style="color:var(--muted)">Privacy • Terms</span>
    </footer>
  </div>

  <script>
    // -- UI: Drawer toggle
    const hamburger = document.getElementById('hamburger');
    const drawer = document.getElementById('drawer');
    hamburger.addEventListener('click', () => {
      drawer.classList.toggle('open');
      drawer.setAttribute('aria-hidden', !drawer.classList.contains('open'));
    });

    // Close drawer when clicking outside
    document.addEventListener('click', (e) => {
      if (!drawer.contains(e.target) && !hamburger.contains(e.target)) {
        drawer.classList.remove('open');
      }
    });

    // -- Animation: page entrance (logo + menu slide)
    window.addEventListener('load', () => {
      setTimeout(() => document.body.classList.add('loaded'), 300);
    });

    // -- (Optional) dynamic generation / search hook - replace with real data later
    const titles = [
      {title:'Naruto Shippuden', genre:'Action', rate:4.8},
      {title:'Death Note', genre:'Thriller', rate:4.9},
      {title:'That Time I Got Reincarnated as a Slime', genre:'Isekai', rate:4.6},
      {title:'Battle Through the Heavens', genre:'Donghua', rate:4.5},
      {title:'Perfect World', genre:'Donghua', rate:3.9},
      {title:'Soul Land 2', genre:'Donghua', rate:4.2},
      {title:'Solo Leveling — Season 2', genre:'Action', rate:4.9},
    ];

    // If you want to dynamically populate grid (example)
    // const grid = document.getElementById('grid'); // currently placeholders exist

    // -- Small accessibility: focus search on explore button
    document.getElementById('exploreBtn').addEventListener('click', () => {
      document.getElementById('searchInput').focus();
    });

    // -- Side note: if you want the gate animation on navigation from signin/signup,
    // you can add document.body.classList.add('loaded') after the gate opens there.
  </script>
<script>
(function() {
  const user = localStorage.getItem("kitsune_user");
  if (!user) window.location.href = "signin.html";
})();
</script>
<script>
/* 🚫 Block back navigation and horizontal swipe gestures */
(function() {
  // Prevent browser back button
  history.pushState(null, null, location.href);
  window.onpopstate = function() {
    // When user tries to go back — log out & redirect to landing page
    localStorage.removeItem('kitsune_user');
    alert('You’ve been logged out for security reasons.');
    window.location.href = 'index.html';
  };

  // Prevent trackpad left/right swipe navigation (desktop)
  window.addEventListener('wheel', (e) => {
    if (Math.abs(e.deltaX) > 0 && !e.ctrlKey) e.preventDefault();
  }, { passive: false });

  // Prevent swipe navigation (mobile)
  let startX = 0;
  window.addEventListener('touchstart', e => startX = e.touches[0].clientX);
  window.addEventListener('touchmove', e => {
    const diffX = e.touches[0].clientX - startX;
    if (Math.abs(diffX) > 80) e.preventDefault();
  }, { passive: false });
})();
</script>
<script>
/* 🛡 Prevent user from navigating back from home */
window.addEventListener("pageshow", function (event) {
  // If the page was loaded from back/forward cache (bfcache)
  if (event.persisted) {
    window.location.href = "logout.html"; // fallback if browser restores session
  }
});

// Disable back button navigation
window.history.pushState(null, null, window.location.href);
window.onpopstate = function () {
  // When user presses back or slides back gesture
  window.history.pushState(null, null, window.location.href);
  alert("🚫 For security reasons, you’ve been logged out!");
  localStorage.removeItem("kitsune_user");
  window.location.href = "signin.html"; // redirect to sign-in or landing page
};

// Optional: block swipe gestures on touch devices (trackpad or finger)
document.addEventListener("touchmove", function (e) {
  if (window.innerWidth < 800 && e.touches.length > 1) {
    e.preventDefault();
    alert("⚠ Swipe-back disabled for security!");
    localStorage.removeItem("kitsune_user");
    window.location.href = "signin.html";
  }
}, { passive: false });
</script>
<script>
window.addEventListener("load", () => {
  // Add a fake state so back button won't immediately go to previous Kitsune pages
  history.pushState(null, "", location.href);
});

window.addEventListener("popstate", () => {
  // If the user is on home page and presses back → kick out of the site
  if (window.location.pathname.includes("index.html") || window.location.pathname === "/") {
    // Replace this with wherever you want them to go when leaving
    window.location.replace(" https://rajputpankaj3737-a11y.github.io/kitsune/"); 
  } else {
    // Optional fallback: redirect back to home if something else triggers popstate
    window.location.href = "index.html";
  }
});
</script>
<!-- Profile Modal -->
<div class="profile-overlay" id="profileOverlay">
  <div class="profile-modal">
    <button class="close-profile" id="closeProfile">×</button>
    <div class="avatar-box" style="position: relative;">
      <img id="modalAvatar" src="assets/images/default-avatar.png" alt="User Avatar">
      <input type="file" id="avatarInput" accept="image/*" style="display: none;">
      <button class="upload-btn" id="upload-btn" title="Change Photo" onclick="document.getElementById('avatarInput').click()">📷</button>
    </div>
    <h2 id="modalName">User Name</h2>
    <p id="modalEmail">user@example.com</p>
    <p id="modalUsername">@username</p>
    <button class="logout-btn" id="logoutBtn">Logout</button>
  </div>
</div>
<script>
const profileOverlay = document.getElementById('profileOverlay');
const closeProfile = document.getElementById('closeProfile');
const profileIcon = document.getElementById('profileBtn');

// Show profile modal when user clicks profile icon
profileIcon.addEventListener('click', (e) => {
  e.preventDefault();
  const userRaw = localStorage.getItem('kitsune_user');
  if (!userRaw) {
    window.location.href = 'signin.html';
    return;
  }

  const user = JSON.parse(userRaw);
  document.getElementById('modalName').textContent = user.name || 'No Name';
  document.getElementById('modalEmail').textContent = user.email || 'No Email';
  document.getElementById('modalUsername').textContent = user.username || 'No Username';
  document.getElementById('modalAvatar').src = user.avatar || 'assets/images/default-avatar.png';

  profileOverlay.style.display = 'flex';
});

// Close when clicking X or outside the modal
closeProfile.addEventListener('click', () => {
  profileOverlay.style.display = 'none';
});
profileOverlay.addEventListener('click', (e) => {
  if (e.target === profileOverlay) {
    profileOverlay.style.display = 'none';
  }
});

// Logout logic
document.getElementById('logoutBtn').addEventListener('click', () => {
  localStorage.removeItem('kitsune_user');
  window.location.href = 'signin.html';
});
</script>
<script>
(function() {
  // URL where user will be sent when they press "back" from Home
  const EXIT_URL = " https://rajputpankaj3737-a11y.github.io/kitsune/"; // <- change this to your preferred exit page

  // When Home loads, push a history state so the first "back" triggers popstate here
  function initBackInterceptor() {
    try {
      // push a state so the back button first pops to this state
      history.pushState({kitsuneHome: true}, "", location.href);

      // add a second state to avoid some browser corner-cases with bfcache
      history.pushState({kitsuneHome2: true}, "", location.href);
    } catch (e) {
      // ignore if browser blocks pushState
      console.warn("history.pushState blocked", e);
    }
  }

  // popstate handler: when a back happens, redirect out (do NOT clear localStorage)
  function onPop(e) {
    // If the state object matches our home states, redirect out
    // We check pathname to be safe (some browsers don't provide state).
    const isOnHomePath = window.location.pathname.includes("index.html") || window.location.pathname === "/" || document.title.toLowerCase().includes("home");
    if (isOnHomePath) {
      // Use replace so the EXIT_URL becomes the current entry (no extra history)
      window.location.replace(EXIT_URL);
    } else {
      // If for some reason popstate fired on non-home, just go to home
      window.location.href = "index.html";
    }
  }

  // init on load
  window.addEventListener("load", () => {
    initBackInterceptor();

    // Listen for popstate (back/forward navigation, swipe gestures)
    window.addEventListener("popstate", onPop, {passive: true});

    // Extra: handle Android physical back via visibilitychange fallback (optional)
    // (Some Android WebViews behave differently; popstate should normally fire.)
    document.addEventListener('visibilitychange', () => {
      if (document.visibilityState === 'hidden') {
        // nothing destructive here — just a safe hook if you want extra handling
      }
    });
  });
})();
</script>
<script>
// ==== PROFILE MODAL FIX ====
document.addEventListener("DOMContentLoaded", () => {
  const profileBtn = document.getElementById("profileBtn");       // 👤 profile icon
  const profileOverlay = document.getElementById("profileOverlay"); // overlay wrapper
  const closeProfile = document.getElementById("closeProfile");     // × close button
  const modalAvatar = document.getElementById("modalAvatar");       // profile picture

  if (!profileBtn || !profileOverlay) return; // stop if structure missing

  // Load saved avatar from localStorage (if any)
  const savedAvatar = localStorage.getItem("avatar");
  if (savedAvatar && modalAvatar) modalAvatar.src = savedAvatar;

  // Open modal when clicking profile icon
  profileBtn.addEventListener("click", (e) => {
    e.preventDefault();
    profileOverlay.style.display = "flex";
    document.body.style.overflow = "hidden"; // lock scroll
  });

  // Close modal when pressing ×
  if (closeProfile) {
    closeProfile.addEventListener("click", () => {
      profileOverlay.style.display = "none";
      document.body.style.overflow = "auto"; // re-enable scroll
    });
  }

  // Close modal when clicking outside the modal box
  profileOverlay.addEventListener("click", (e) => {
    if (e.target === profileOverlay) {
      profileOverlay.style.display = "none";
      document.body.style.overflow = "auto";
    }
  });

  // Optional: handle avatar change (if upload button exists)
  const avatarInput = document.getElementById("avatarInput");
  if (avatarInput) {
    avatarInput.addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(evt) {
          const imgSrc = evt.target.result;
          modalAvatar.src = imgSrc;
          localStorage.setItem("avatar", imgSrc); // save new avatar
        };
        reader.readAsDataURL(file);
      }
    });
  }
});
</script>
<script>
// ✅ Replace profile icon with user's avatar (if logged in)
document.addEventListener('DOMContentLoaded', () => {
  const userData = localStorage.getItem('kitsune_user');
  const profileAvatar = document.getElementById('profileAvatar');

  if (userData && profileAvatar) {
    try {
      const user = JSON.parse(userData);
      // If user has a saved avatar (either from upload or Google), use it
      profileAvatar.src = user.avatar || localStorage.getItem('avatar') || "assets/images/default-avatar.png";
    } catch (err) {
      console.error("Failed to parse user data:", err);
    }
  }
});
</script>
<!-- 🌐 Community Floating Modal -->
<div id="communityModal" class="community-modal">
  <div class="community-content">
    <button class="close-btn" id="closeCommunity">×</button>
    <h2>Community & Privacy</h2>
    <p>
      <strong>Google Sign-In Policy:</strong><br>
      We use Google Sign-In to authenticate users securely. Your Google account data is handled by Google — we do not store your password or sensitive information.
    </p>
    <p>
      <strong>Manual Sign-Up Policy:</strong><br>
      When you sign up manually, your details (email, phone number, etc.) are stored only on your local system. We do not collect or share this data with anyone.
    </p>
    <p>
      <strong>Contact Us:</strong><br>
      If you have any questions, feel free to reach out at:<br>
      <a href="mailto:kitsuneanime436@gmail.com" style="color:#ff6b81;font-weight:600;">kitsuneanime436@gmail.com</a>
    </p>
  </div>
</div>
<script>
  // 💬 Community Modal Toggle
  const communityBtn = document.getElementById('communityBtn');
  const communityModal = document.getElementById('communityModal');
  const closeCommunity = document.getElementById('closeCommunity');

  if (communityBtn && communityModal && closeCommunity) {
    communityBtn.addEventListener('click', () => {
      communityModal.classList.add('active');
      document.body.style.overflow = 'hidden'; // prevent scrolling
    });

    closeCommunity.addEventListener('click', () => {
      communityModal.classList.remove('active');
      document.body.style.overflow = '';
    });

    // close on outside click
    communityModal.addEventListener('click', (e) => {
      if (e.target === communityModal) {
        communityModal.classList.remove('active');
        document.body.style.overflow = '';
      }
    });
  }
</script>
<script>
// 🛡 Kickout only from Home page
window.addEventListener('popstate', () => {
  const currentPage = window.location.pathname.split('/').pop();
  if (currentPage === 'home.html') {
    // If the user presses back on home page → exit site
    window.location.replace('https://www.google.com'); // or your landing page (index.html)
  }
});
document.querySelectorAll("a, .anime-card").forEach(el => {
  el.addEventListener("click", e => {
    document.body.classList.add("fade-out");
    setTimeout(() => { window.location = el.href; }, 300);
  });
});
</script>
</body>
</html>